function getFromHTML(a,b){return a.getElementsByTagName(b)}function Initialize(){shapes=[],canvas=document.createElement("canvas"),context=canvas.getContext("2d"),shapesHTML=document.getElementsByTagName("shapes")[0],circles=getFromHTML(shapesHTML,"circle"),squares=getFromHTML(shapesHTML,"square"),images=getFromHTML(shapesHTML,"image"),document.body.append(canvas),document.body.style.padding="0",document.body.style.margin="0",document.body.style.overflow="hidden",initShapes(circles),initShapes(images,!0),initShapes(squares),Draw()}function initShapes(a,b){for(var c=0;c<a.length;c++){var e,f,g,d=a[c];e=d.hasAttribute("pos")?[parseInt(d.getAttribute("pos").split(",")[1]),parseInt(d.getAttribute("pos".split(","))[1])]:[Math.random()*canvas.width,Math.random()*canvas.height],d.hasAttribute("texture")?texture=d.getAttribute("texture"):texture=null,f=d.hasAttribute("color")?d.getAttribute("color"):"rgb(R,G,B)".replace("R",Math.round(255*Math.random())).replace("G",Math.round(255*Math.random())).replace("B",Math.round(255*Math.random())),g=d.hasAttribute("size")?d.getAttribute("size"):32*Math.random()+16,d.hasAttribute("speed")?speed=d.getAttribute("speed"):speed=2*Math.random()+2,d=new Shape(d.tagName.toLowerCase(),e,f,g,speed,b?texture:null),shapes.push(d)}return shapes}function Draw(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,context.fillStyle="black",context.fillRect(0,0,canvas.width,canvas.height);for(var a=shapes.length-1;a>=0;a--)shapes[a].show().update();setTimeout(Draw,1e3/69)}function Shape(a,b,c,d,e,f){"circle"==a.toLowerCase()?this.d=function(a,b,c,d){a.arc(b,c,d/2,0,2*Math.PI)}:"square"==a.toLowerCase()?this.d=function(a,b,c,d){a.rect(b-d/2,c-d/2,d,d)}:"image"==a.toLowerCase()?(this.image=new Image,this.image.src=f||"",this.d=function(a,b,c,d){a.drawImage(this.image,b-d/2,c-d/2,d,d)}):this.d=function(b,c,d,e){b.fillText(a+" isn't\na valid\ntype",c,d-e/3)},this.show=function(){return context.beginPath(),context.fillStyle=this.color,this.d(context,this.x,this.y,this.size),context.fill(),context.closePath(),this},this.update=function(){return this.x+=this.velX,this.y+=this.velY,(this.x<0||this.x>canvas.width)&&(this.velX*=-1),(this.y<0||this.y>canvas.height)&&(this.velY*=-1),this},this.x=b[0],this.y=b[1],this.velX=null!=e?Math.random()>.5?-e:e:Math.random()-.5,this.velY=null!=e?Math.random()>.5?-e:e:Math.random()-.5,this.color=c,this.size=d}var shapes,shapesHTML,canvas,context,circles,squares,images;window.onload=Initialize;
